# 禁止Pod设置CPU限制
由于linux内核的bug导致Pod 添加CPU限制后CPU资源不能被充分利用，进而导致容器在高计算情况下发生性能下降（如延迟更大）。
## 禁止Pod设置CPU限制需要做如下处理：
### 隔离“无CPU限制”服务
将高消耗的服务放在特定的节点（污染节点）上，让这些服务不会影响到所有“边界清晰”的节点。采用更好控制措施，更容易地发现存在问题的节点，从而标识出污染节点，并对超限使用的服务添加缓冲措施来提升服务的可靠性。
### 正确分配的CPU和内存
使用Datadog工具，对集群中运行的对希望去除限制的每个服务进行周期性的资源使用分析。按照服务所请求CPU资源的1.2倍，设置了服务的最大CPU使用。这将确保在Kubernetes不尝试调度同一节点中的任何其他服务的情况下，为节点上的服务分配了足够的资源。只需将最大CPU使用的设置数字提高一点即可。同时还可以注意到，由于服务是面向用户的，因此CPU峰值使用率与峰值流量时间是相互匹配的。
对内存的请求和使用情况也执行同样的操作策略。为了提升服务的安全性，在容器内资源使用率过高时，可以使用Pod的自动水平伸缩功能来创建新的Pod，Kubernetes将自动将新建的Pod调度到资源充足的节点中。除此之外，还建议为集群设计资源使用告警，或者使用节点的自动伸缩功能为资源不够的集群自动添加计算节点。

参考：http://dockone.io/article/10888